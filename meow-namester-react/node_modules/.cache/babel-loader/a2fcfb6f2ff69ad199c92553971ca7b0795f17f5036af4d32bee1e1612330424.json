{"ast":null,"code":"var _s = $RefreshSig$();\n/**\n * @module useNameOptions\n * @description A custom React hook that manages cat name options in Supabase.\n */\n\nimport { useState, useEffect } from 'react';\nimport { supabase } from './supabaseClient';\nfunction useNameOptions() {\n  _s();\n  const [nameOptions, setNameOptions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    fetchNameOptions();\n\n    // Set up real-time subscription\n    const subscription = supabase.channel('name_options_changes').on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'name_options'\n    }, () => {\n      fetchNameOptions();\n    }).subscribe();\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, []);\n  async function fetchNameOptions() {\n    try {\n      setLoading(true);\n      const {\n        data,\n        error: fetchError\n      } = await supabase.from('name_options').select('name').order('created_at', {\n        ascending: true\n      });\n      if (fetchError) throw fetchError;\n      setNameOptions(data.map(option => option.name));\n    } catch (err) {\n      console.error('Error fetching name options:', err);\n      setError(err);\n    } finally {\n      setLoading(false);\n    }\n  }\n  async function addNameOption(newName) {\n    if (!(newName !== null && newName !== void 0 && newName.trim())) return;\n    try {\n      setLoading(true);\n      const {\n        error: insertError\n      } = await supabase.from('name_options').insert({\n        name: newName.trim()\n      });\n      if (insertError) throw insertError;\n    } catch (err) {\n      console.error('Error adding name option:', err);\n      setError(err);\n    } finally {\n      setLoading(false);\n    }\n  }\n  async function removeNameOption(name) {\n    try {\n      setLoading(true);\n      const {\n        error: deleteError\n      } = await supabase.from('name_options').delete().eq('name', name);\n      if (deleteError) throw deleteError;\n    } catch (err) {\n      console.error('Error removing name option:', err);\n      setError(err);\n    } finally {\n      setLoading(false);\n    }\n  }\n  return {\n    nameOptions,\n    loading,\n    error,\n    addNameOption,\n    removeNameOption\n  };\n}\n_s(useNameOptions, \"Daiu+cOcMCmeHtRWhFICx8ARoGk=\");\nexport default useNameOptions;","map":{"version":3,"names":["useState","useEffect","supabase","useNameOptions","_s","nameOptions","setNameOptions","loading","setLoading","error","setError","fetchNameOptions","subscription","channel","on","event","schema","table","subscribe","unsubscribe","data","fetchError","from","select","order","ascending","map","option","name","err","console","addNameOption","newName","trim","insertError","insert","removeNameOption","deleteError","delete","eq"],"sources":["/Users/aaron/Desktop/Side Projects/name-picker/meow-namester-react/src/lib/supabase/useNameOptions.js"],"sourcesContent":["/**\n * @module useNameOptions\n * @description A custom React hook that manages cat name options in Supabase.\n */\n\nimport { useState, useEffect } from 'react';\nimport { supabase } from './supabaseClient';\n\nfunction useNameOptions() {\n  const [nameOptions, setNameOptions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    fetchNameOptions();\n    \n    // Set up real-time subscription\n    const subscription = supabase\n      .channel('name_options_changes')\n      .on('postgres_changes', \n        { \n          event: '*', \n          schema: 'public', \n          table: 'name_options' \n        }, \n        () => {\n          fetchNameOptions();\n        }\n      )\n      .subscribe();\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, []);\n\n  async function fetchNameOptions() {\n    try {\n      setLoading(true);\n      const { data, error: fetchError } = await supabase\n        .from('name_options')\n        .select('name')\n        .order('created_at', { ascending: true });\n\n      if (fetchError) throw fetchError;\n\n      setNameOptions(data.map(option => option.name));\n    } catch (err) {\n      console.error('Error fetching name options:', err);\n      setError(err);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function addNameOption(newName) {\n    if (!newName?.trim()) return;\n    \n    try {\n      setLoading(true);\n      const { error: insertError } = await supabase\n        .from('name_options')\n        .insert({ name: newName.trim() });\n\n      if (insertError) throw insertError;\n    } catch (err) {\n      console.error('Error adding name option:', err);\n      setError(err);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function removeNameOption(name) {\n    try {\n      setLoading(true);\n      const { error: deleteError } = await supabase\n        .from('name_options')\n        .delete()\n        .eq('name', name);\n\n      if (deleteError) throw deleteError;\n    } catch (err) {\n      console.error('Error removing name option:', err);\n      setError(err);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return {\n    nameOptions,\n    loading,\n    error,\n    addNameOption,\n    removeNameOption\n  };\n}\n\nexport default useNameOptions; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}